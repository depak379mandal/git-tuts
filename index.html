<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IETE Javascript workshop</title>
    <style>
        .checked{
            text-decoration: line-through;
        }
    </style>
</head>
<body>
    <ul>
    <li>some</li>
    <li>some</li>
    <li>some</li>
    <li>some</li>
    <li>some</li>
    <li>some</li>
    <li>some</li></ul>
    <h1>
        IETE workshop TODO list App
    </h1>
    <input type="text" id="todoInput">
    <button onclick="addTodo()">Add todo</button>
    <div>
        <h3>My todo list</h3>
        <ol id="mytodolists">

        </ol>
    </div>
    <script>
        let todoList = [['todo',false], ['todo1', true]];
        function addTodo(){
            let todo = document.getElementById('todoInput');
            if(todo.value != ''){
                todoList.push(todo.value);
                let mytodoLists = document.getElementById('mytodolists');
                mytodoLists.innerHTML = '';
                for(let i = 0;i<todoList.length; i++){
                    mytodoLists.innerHTML = mytodoLists.innerHTML +`<li>
                                                                        <input type='checkbox' value="1" onchange='todoDone(event)'>
                                                                        ${todoList[i]}
                                                                        <button onclick="removeTodo(event, ${i})">x</button>
                                                                    </li>`;
                }

            }
            todo.value = '';
        }
        function removeTodo(event, index){
            todoList = todoList.slice(0, index).concat(todoList.slice(index+1,));
            let mytodoLists = document.getElementById('mytodolists');
            mytodoLists.innerHTML = '';
            for(let i = 0;i<todoList.length; i++){
                mytodoLists.innerHTML = mytodoLists.innerHTML +`<li>
                                                                    <input type='checkbox' value="1" onchange='todoDone(event)'>
                                                                    ${todoList[i]}
                                                                    <button onclick="removeTodo(event, ${i})">x</button>
                                                                </li>`;
            }
        }

        function todoDone(event){
            let parentLi = event.target.parentElement;
            if(parentLi.classList.contains('checked')){
                parentLi.classList.remove('checked');
            }
            else{
                parentLi.classList.add('checked');
            }
        }
    </script>
</body>
</html>
